!function(t,e){function i(t){if(!(this instanceof i))return new i(t);this.el=t.el&&t.el instanceof HTMLElement?t.el:e.querySelector(t.el),this.imgs=t.imgs,this.imgs.push(this.imgs[0]),this.imgs.unshift(this.imgs[t.imgs.length-2]),this.autoPlay=t.autoPlay||!1,this.timer=null,this.time=t.time||300,this.index=1,this.imgNodes=[],this._init()}i.prototype={_init:function(){console.log(this.el),this.el.style.overflow="hidden";var t=e.createDocumentFragment();this.width=this.el.clientWidth,console.log(this.width);var i=e.createElement("div");i.style.width=this.width*this.imgs.length+"px",i.style.height="100%",i.style.transform="translate(-"+this.width+"px, 0)",i.id="carousel-content",t.appendChild(i),this.content=i,this._eventBind(i);for(var n=0;n<this.imgs.length;n++){var s=e.createElement("img");s.style.height="100%",s.style.display="inline-block",s.style.width=this.width+"px",s.src=this.imgs[n],this.imgNodes.push(s),i.appendChild(s)}this.el.appendChild(t),this.autoPlay&&this._autoPlay(),this._onResize()},_slide:function(t){var e=this;e.index=t,e.content.style.WebkitTransition="all "+e.time+"ms",e.content.style.transition="all "+e.time+"ms",e.content.style.transform="translate(-"+e.width*e.index+"px, 0)",setTimeout(function(){e.content.style.WebkitTransition="all 0ms",e.content.style.transition="all 0ms"},e.time);var i=!1;0==e.index?(e.index=e.imgs.length-2,i=!0):e.index==e.imgs.length-1&&(e.index=1,i=!0),i&&setTimeout(function(){e.content.style.transform="translate(-"+e.width*e.index+"px, 0)"},e.time)},_eventBind:function(t){function e(t,e){return 180*Math.atan2(e,t)/Math.PI}function i(t,i,n,s){var a=n-t,l=s-i;if(!(Math.abs(a)<2&&Math.abs(l)<2)){var o=e(a,l);return o>=-45&&o<45?1:o>=45&&o<135?2:o>=135&&o<180||o>=-180&&o<-135?3:o>=-135&&o<-45?4:void 0}}var n,s,a,l,o,h,d,r=this,c=!1;t.addEventListener("touchstart",function(t){t.preventDefault(),r.autoPlay&&clearInterval(r.timer),n=t.touches[0].pageX,s=t.touches[0].pageY,h=(new Date).getTime()},!1),t.addEventListener("touchmove",function(e){1===e.changedTouches.length&&0!==n&&0!==s&&(a=e.changedTouches[0].pageX,l=e.changedTouches[0].pageY,t.style.transform="translate("+(-r.width*r.index+a-n)+"px, 0)",d=(new Date).getTime(),c=!0)},!1),t.addEventListener("touchend",function(e){if((Math.abs(a-n)>r.width/2||Math.abs((a-n)/(d-h))>.7)&&c){switch(o=i(n,s,a,l)){case 1:r._slide(r.index-1);break;case 3:r._slide(r.index+1)}c=!1}else r.content.style.WebkitTransition="all "+r.time+"ms",r.content.style.transition="all "+r.time+"ms",t.style.transform="translate(-"+r.width*r.index+"px, 0)",setTimeout(function(){r.content.style.WebkitTransition="all 0ms",r.content.style.transition="all 0ms"},r.time);r.autoPlay&&r._autoPlay()},!1)},_autoPlay:function(){var t=this;t.timer=setInterval(function(){t._slide(t.index+1)},t.autoPlay)},_onResize:function(){var e=this;t.addEventListener("resize",function(){e.width=e.el.clientWidth,console.log(e.width),e.content.style.width=e.width*e.imgs.length+"px",e.imgNodes.forEach(function(t){t.style.width=e.width+"px"}),e._slide(e.index)},!1)}},t.Carousel=i}(window,document);
//# sourceMappingURL=Carousel.js.map
